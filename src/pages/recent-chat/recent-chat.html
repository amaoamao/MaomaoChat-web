<!--
  Generated template for RecentChatPageChat page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-buttons left>
      <button ion-button icon-only (click)="toggleMenu()">
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>聊天</ion-title>

    <ion-buttons right>
      <button ion-button icon-only (click)="addFriend()">
        <ion-icon name="person-add"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-list>
    <ion-item-sliding #sliding *ngFor="let item of currentItems|recentPipe">
      <button ion-item (click)="openItem(item)" [ngClass]="{'chat-fixed':item.fixed}"
              (press)="presentActionSheet(item,sliding)">
        <ion-avatar item-left>
          <img src="assets/img/speakers/bear.jpg"/>
        </ion-avatar>
        <h2>{{item.receiver.id}}</h2>
        <p>{{item.message.content}}</p>
        <ion-note item-right>{{item.message.time}}</ion-note>
        <ion-badge item-right color="danger">1</ion-badge>
      </button>

      <ion-item-options>
        <button ion-button color="primary" (click)="makeItTop(item,sliding)">
          &nbsp;&nbsp;{{item.fixed?'取消':''}}置顶&nbsp;&nbsp;
        </button>
        <button ion-button color="danger" (click)="deleteItem(item)">
          &nbsp;&nbsp;删除&nbsp;&nbsp;
        </button>

      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

</ion-content>
